<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 at 2024-07-01 
 | Rendered using Apache Maven Fluido Skin 1.6
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20240701" />
    <meta http-equiv="Content-Language" content="en" />
    <title>dependency-check &#x2013; Caching ODCs H2 Database</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.6.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
      <script type="text/javascript" src="../js/apache-maven-fluido-1.6.min.js"></script>
<style type="text/css">
                #bannerLeft { margin-top:-20px;margin-bottom:5px !important}
                a.externalLink[href^=https]{padding-right:inherit;background-image:none !important}
                a.externalLink[href^=http]{padding-right:inherit;background-image:none !important}
            </style>
      </head>
    <body class="topBarDisabled">
                      <a href="https://github.com/jeremylong/DependencyCheck">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png"
        alt="Fork me on GitHub">
    </a>
      <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><div id="bannerLeft"><img src="../images/dc.svg"  alt="OWASP dependency-check"/></div>
</div>
        <div class="pull-right"></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        <li class=""><a href="https://www.owasp.org/" class="externalLink" title="OWASP">OWASP</a><span class="divider">/</span></li>
      <li class=""><a href="https://www.owasp.org/index.php/OWASP_Dependency_Check" class="externalLink" title="Dependency-Check">Dependency-Check</a><span class="divider">/</span></li>
      <li class=""><a href="../" title="documentation">documentation</a><span class="divider">/</span></li>
    <li class="active ">Caching ODCs H2 Database</li>
        <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2024-07-01</li>
          <li id="projectVersion" class="pull-right">Version: 10.0.0</li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
<ul class="nav nav-list">
          <li class="nav-header">OWASP dependency-check</li>
    <li><a href="../index.html" title="General"><span class="icon-chevron-down"></span>General</a>
      <ul class="nav nav-list">
    <li><a href="../general/internals.html" title="How it Works"><span class="none"></span>How it Works</a>  </li>
    <li><a href="../general/thereport.html" title="Reading the Report"><span class="none"></span>Reading the Report</a>  </li>
    <li><a href="../general/suppression.html" title="False Positives"><span class="none"></span>False Positives</a>  </li>
    <li><a href="../general/hints.html" title="False Negatives"><span class="none"></span>False Negatives</a>  </li>
    <li><a href="../data/index.html" title="Internet Access Required"><span class="icon-chevron-down"></span>Internet Access Required</a>
      <ul class="nav nav-list">
    <li><a href="../data/proxy.html" title="Proxy"><span class="none"></span>Proxy</a>  </li>
    <li><a href="../data/mirrornvd.html" title="Mirroring NVD"><span class="none"></span>Mirroring NVD</a>  </li>
    <li><a href="../data/cachenvd.html" title="Snapshotting the NVD"><span class="none"></span>Snapshotting the NVD</a>  </li>
    <li class="active"><a href="#"><span class="none"></span>Caching the Database</a>
  </li>
    <li><a href="../data/database.html" title="Central DB"><span class="none"></span>Central DB</a>  </li>
    <li><a href="../data/ossindex.html" title="Sonatype OSS Index"><span class="none"></span>Sonatype OSS Index</a>  </li>
      </ul>
  </li>
    <li><a href="../related.html" title="Related Work"><span class="none"></span>Related Work</a>  </li>
    <li><a href="../general/dependency-check.pptx" title="Project Presentation (pptx)"><span class="none"></span>Project Presentation (pptx)</a>  </li>
    <li><a href="../general/dependency-check.pdf" title="Project Presentation (pdf)"><span class="none"></span>Project Presentation (pdf)</a>  </li>
    <li><a href="../general/SampleReport.html" title="Sample Report"><span class="none"></span>Sample Report</a>  </li>
    <li><a href="../general/scan_iso.html" title="How to Scan an ISO Image"><span class="none"></span>How to Scan an ISO Image</a>  </li>
      </ul>
  </li>
    <li><a href="../analyzers/index.html" title="File Type Analyzers"><span class="icon-chevron-right"></span>File Type Analyzers</a>  </li>
    <li><a href="../modules.html" title="Modules"><span class="icon-chevron-right"></span>Modules</a>  </li>
          <li class="nav-header">Project Documentation</li>
    <li><a href="../project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a>  </li>
    <li><a href="../project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a>  </li>
  </ul>
          <hr />
          <div id="poweredBy">
          <script type="text/javascript">asyncJs( 'https://apis.google.com/js/plusone.js' )</script>
        <div class="g-plusone" data-href="https://github.com/jeremylong/DependencyCheck.git" data-size="tall" ></div>
                  <div class="clear"></div>
              <div class="clear"></div>
                          <div id="twitter">
        <a href="https://twitter.com/ctxt" class="twitter-follow-button" data-show-count="true" data-align="left" data-size="medium" data-show-screen-name="true" data-lang="en">Follow ctxt</a>
    <script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
        </div>
                  <div class="clear"></div>
              <div class="clear"></div>
  <a href="https://www.ej-technologies.com/products/jprofiler/overview.html" title="JProfiler" class="builtBy"><img class="builtBy"  alt="JProfiler Java Profiler" src="https://jeremylong.github.io/DependencyCheck/images/logos/jprofiler.png"   width="170px"  /></a>
<a href="http://www.jetbrains.com/idea/" title="IntelliJ" class="builtBy"><img class="builtBy"  alt="developed using IntelliJ" src="https://jeremylong.github.io/DependencyCheck/images/logos/logo_intellij_idea.png"   width="170px"  /></a>
              </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >
<h1>Caching ODC's H2 Database</h1>
<p>Many users of dependency-check ensure that ODC runs as fast as possible by caching
the entire <code>data</code> directory included the H2 database (<code>odc.mv.db</code>). The location of the <code>data</code>
directory is different for each integration (cli, maven, gradle, etc.), however each
allows users to configure this location.</p>
<p>Within the <code>data</code> directory there is a <code>cache</code> directory that contains temporary caches
of data requested that is not stored in the database and is generally build specific</p>
<ul>

<li>but can be re-used.</li>
</ul>
<p>There are two primary strategies used:</p>
<ol style="list-style-type: decimal">

<li>Single node database updater with multiple node &#x201c;readers&#x201d;</li>
</ol>
<p>Use a single node to build the database using the integration in update only mode
(e.g., <code>--updateOnly</code> for the cli) and specify the data directory location (see
the configuration documentation for each integration's configuration).</p>
<p>The <code>data</code> directory is then archived somewhere accessible to all nodes.
Subsequent nodes that perform scanning will download the archived database before
scanning. These &#x201c;reader&#x201d; nodes would be configured with <code>--noupdate</code> (or the related
configuration to disable the updates in each integration) so they are not reliant
on outgoing calls.</p>
<p>The cached <code>data</code> directory (and H2 database) is generally updated by the single
node/process daily in this use case - but could be designed with a more frequent update.</p>
<ol style="list-style-type: decimal">

<li>Multiple node database updaters collaborating on a common cache location</li>
</ol>
<p>Some users have a slightly modified version of the above caching strategy. Instead
of only having a single update node - they allow all nodes to update. However,
the entire <code>data</code> directory is zipped and stored in a common location, including the H2
database, <code>cache</code>, and in some cases cached data from multiple upstream sources.</p>
<p>Each node will execute a scan (with updates enabled) and if successful the updated
<code>data</code> directory is zipped and uploaded to the common location for use by other nodes.
This has the small advantage of being updated faster and will store the cache between
executions which can improve the performance on some builds, with the disadvantage of
needing to allow all nodes to update the common cache, and thus requiring some degree of
consistency in how they configure ODC.</p><section>
<h2><a name="Additional_Notes"></a>Additional Notes</h2>
<p>The <code>data</code> directory may also contain cached data from other upstream sources, dependent
on which analyzers are enabled. Ensuring that file modification times are retained during
archiving and un-archiving will make these safe to cache, which is especially important in
a multi-node update strategy.</p></section>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &copy;2012&#x2013;2024
<a href="https://www.owasp.org">OWASP</a>.
All rights reserved.</p>
        </div>
        </div>
    </footer>
    </body>
</html>
